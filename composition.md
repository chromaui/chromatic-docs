---
layout: default
title: Composition
description: Learn to combine Storybooks through composition
---

# Storybook composition

Chromatic publishes your Storybook to a secure CDN. That means you can combine published Storybooks with your local Storybook using [Composition](https://storybook.js.org/docs/react/workflows/storybook-composition).

## Compose published Storybooks 

Chromatic generates a permalink for published Storybooks. Reference this permalink when combining Storybooks.

In your local Storybook, add a `refs` key to [`.storybook/main.js`](https://storybook.js.org/docs/react/configure/overview#configure-story-rendering) with the following configuration.

```js
// .storybook/main.js

module.exports = {
  stories: ['../src/**/*.stories.@(js|jsx|ts|tsx)'],
  refs: {
    'chromatic-published-Storybook': {
      title: 'Design System',
      // The url provided by Chromatic when it was published
      url: 'https://your-published-url.chromatic.com',
    },
  }
};
```

When your local Storybook starts, it will auto detect the `refs` and compose the published Storybook from Chromatic. You'll see both sets of stories side-by-side.

Access to published Storybooks through Composition will abide by the same set of rules documented [here](access). You'll need sign in to Chromatic via Storybook's UI to compose private projects. 

![Multiple Storybooks combined through composition](img/reference-external-storybooks-composition.jpg)

---

## Package Composition

Design system and component library authors can automatically compose their Storybook inside their consumerâ€™s Storybooks. Add a `storybook` property in the `package.json`.


```json
{
  "storybook":{
    "url":"https://main--xyz123.chromatic.com"
  }
}
```
When Storybook starts, it scans for external Storybooks referenced by your packages and loads them into the UI. 
Looking in more detail at the example url:

 - **main** -- relates to the branch currently used.
 - **xyz123** -- relates to the application id generated by Chromatic.


This is the only url you'll need to supply, each time you publish a new version, Chromatic will automatically find the updated url for the package and consumers will automatically see the new changes.


### Versioning 

Currently we support automatic version information through GitHub Releases, for public or open source projects only. And also through GitLab Releases for all projects linked into Chromatic. Projects in BitBucket or any other type of unlinked project will not benefit from this by default.

If you or your team are using a provider for which we currently don't support automatic versioning, you can still get version information by manually updating your `package.json` with the current URL of the deployed version (e.g. https://abc789--xyz123.chromatic.com), where `abc789` relates to the commit hash of the release and `xyz123` is the app id generated by Chromatic. 

<div class="aside">
  Get in <a href="mailto:support@chromatic.com">touch with us </a> for further support with any of these providers.
</div>
 

You can use the `/metadata.json` endpoint as a means to quickly get additional information about the deployed Storybook version as it will output a response similar to the example below:

```json
{
  "versions":{
    "v0.1.1":"https://xyz123.chromatic.com"
  }
}
```

---

### Resources

- [Storybook composition](https://storybook.js.org/docs/react/workflows/storybook-composition)
- [Package composition with Storybook](https://storybook.js.org/docs/react/workflows/package-composition)
