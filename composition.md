---
layout: default
title: Composition
description: Learn to combine Storybooks through composition
---

# Storybook composition

We've already seen how easily we can configure [Chromatic with Storybook](storybook) and [publish](document#direct-access-to-your-storybook) it into a secure CDN. 

Now we're going to give you a quick overview on how you can combine multiple Storybooks though composition. This is helpful when working with big projects that might spread around multiple repositories or use different tech stacks.

## Compose published Storybooks 

At any time you can add a reference to any Storybook published with Chromatic and embed it into your own.

To do so, you'll need to change the [`storybook/main.js`](https://storybook.js.org/docs/react/configure/overview#configure-story-rendering) file and add the `ref` key with some additional configuration, Similar to the example below:

```js
// .storybook/main.js

module.exports = {
  stories: ['../src/**/*.stories.@(js|jsx|ts|tsx)'],
  refs: {
    'chromatic-published-Storybook': {
      title: 'Design System',
      // The url provided by Chromatic when it was published
      url: 'https://your-published-url.chromatic.com',
    },
  }
};
```

Now the published Storybook will be available for consumption, as if you were working on it locally.

It's worth mentioning that access to any deployed Storybooks through composition will abide to the same set of rules documented [here](access). 

![Multiple Storybooks combined through composition](img/reference-external-storybooks-composition.jpg)

---

## Package Composition

As we've just seen composition can be used for published Storybooks with ease. But if you or your team are the authors of a component library or a design system you have some tooling at your disposal to drive adoption.

You can add a `storybook` property in the `package.json` file with additional information. Similar to the example below:

```json
{
  "storybook":{
    "url":"https://main--xyz123.chromatic.com"
  }
}
```

Looking in more detail at the example url:

 - **main** -- relates to the branch currently used.
 - **xyz123** -- relates to the application id generated by Chromatic.


This is the only url you'll need to supply, each time you publish a new version, Chromatic will automatically find the updated url for the package and consumers will automatically see the new changes.


### Versioning 

Currently we support version information through GitHub Releases, for public or open source projects only. And also through GitLab Releases for all projects linked into Chromatic. Projects in BitBucket or any other type of unlinked project will not benefit from this.

You can use the `/metadata.json` endpoint as a means to quickly get additional information about the deployed Storybook version as it will output a response similar to the example below:

```json
{
  "versions":{
    "v0.1.1":"https://xyz123.chromatic.com"
  }
}
```

---

### Resources

- [Storybook composition](https://storybook.js.org/docs/react/workflows/storybook-composition)
- [Package composition with Storybook](https://storybook.js.org/docs/react/workflows/package-composition)
