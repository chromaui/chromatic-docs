---
import type { ConfigOption as ConfigOptionType } from "../../chromatic-config/generate-schema";
import configOptions from "../../chromatic-config/options.json";
import { markdown } from "../markdown";
import { ConfigOption } from "./ConfigOption";

const formatOption = async (option: ConfigOptionType) => {
  return {
    ...option,
    option: option.option || option.flag,
    description: await markdown(option.description),
    example: await markdown(option.example),
    default: option.default
      ? `<code>${option.default}</code>`
      : option.defaultComment,
  };
};

const formattedOptions = await Promise.all(
  (configOptions as ConfigOptionType[]).map(formatOption),
);
---

{formattedOptions.map((option) => <ConfigOption {...option} />)}
