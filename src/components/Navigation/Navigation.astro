---
import { type CollectionEntry } from "astro:content";
import Search from "../Search.astro";
import { Support } from "../Support";
import { SideNav } from "./SideNav";
import { Container } from "./styles";
import { DropdownNav } from "./DropdownNav";
import { transformNavGroups } from "./transform-nav-groups";
import type { NavGroupItem } from "./types";

interface Props {
  url: string;
  navGroups: {
    title: string;
    items: NavGroupItem[];
    defaultOpen?: boolean;
    timeline?: boolean;
  }[];
}

const { navGroups: navItems, url } = Astro.props;

const transformedNavGroups = navItems ? transformNavGroups(navItems) : [];
---

<Container>
  <Search />
  <DropdownNav
    client:only="react"
    groups={transformedNavGroups as any}
    url={url}
  />
  <SideNav client:load sidebarGroups={transformedNavGroups} url={url} />
  <Support client:load />
</Container>
