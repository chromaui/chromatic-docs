---
import { NavDropdownMenu } from "./DropDownMenu";
const { groups, url } = Astro.props;

interface DropdownNavGroup {
  title: string;
  items: {
    id: string;
    slug: string;
    breadcrumb: string;
    label: string;
    href: string;
    isActive: boolean;
  }[];
}

interface Props {
  groups: DropdownNavGroup[];
  url?: string;
}

const navGroups = groups.map((group) => ({
  label: group.title,
  items: group.items.map((item) => ({
    id: item.slug,
    breadcrumb: `${group.title} Â» ${item.label}`,
    label: item.label,
    href: item.slug,
    isActive: item.slug === url,
  })),
}));

const allPages = navGroups.map((group) => group.items).flat();

const label =
  allPages.find((item) => item.isActive)?.breadcrumb || allPages[0].breadcrumb;
---

<NavDropdownMenu client:load label={label} groups={navGroups} />
