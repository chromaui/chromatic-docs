---
layout: "../../../layouts/Layout.astro"
title: Configure
description: Learn about the various configuration options for visual tests for Cypress
sidebar: { order: 4 }
---

import { TabItem, Tabs } from "../../../components/Tabs";

# Configure visual tests for Cypress

You can enhance your Cypress and Chromatic tests further by configuring them using the options outlined in the following sections.

## Cypress options

Cypress can be configured with [Cypress environment variables](https://docs.cypress.io/guides/guides/environment-variables).

Setting options globally can be done in your Cypress config file as follows:

```ts
// cypress.config.ts
export default defineConfig({
  env: {
    disableAutoSnapshot: true,
  },

  // other setup...
});
```

Options can also be overridden at the test level:

```ts
// some-test.cy.ts
it("A test that does something", { env: { disableAutoSnapshot: true } }, () => {
  cy.visit("https://some-url.com");
});
```

### E2E options

These options control how the Chromatic archive fixture behaves.

| Option                   | Type            | Description                                                                                                                                                                          |
| ------------------------ | --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `disableAutoSnapshot`    | `boolean`       | When `true`, will disable the snapshot that happens automatically at the end of a test when using the Chromatic test fixture.                                                        |
| `resourceArchiveTimeout` | `number`        | Maximum amount of time that each test will wait for the network to be idle while archiving resources.                                                                                |
| `assetDomains`           | `array[string]` | A list of domains external to the test location that you want Chromatic to also capture assets from, e.g., <code style="display: inline;">['other-domain.com','our-cdn.com']</code>. |

### Chromatic options

These options control how Chromatic behaves concerning the stories of your archives.

| Option                    | Type      | Chromatic Docs                                                          |
| ------------------------- | --------- | ----------------------------------------------------------------------- |
| `delay`                   | `number`  | [Delay](/docs/delay/)                                                   |
| `diffIncludeAntiAliasing` | `boolean` | [Threshold for changes](/docs/threshold#anti-aliasing)                  |
| `diffThreshold`           | `number`  | [Threshold for changes](/docs/threshold#setting-the-threshold)          |
| `forcedColors`            | `string`  | [Media Features](/docs/media-features#test-high-contrast-color-schemes) |
| `pauseAnimationAtEnd`     | `boolean` | [Animations](/docs/animations#css-animations)                           |
| `prefersReducedMotion`    | `string`  | [Media Features](/docs/media-features#verify-reduced-motion-animations) |

### Environment variables

Some options can be configured through environment variables.

| Environment variable         | Description                                                                                                                                                                                                                                                                                                                                   |
| ---------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `CHROMATIC_ARCHIVE_LOCATION` | If you have configured your project's [`downloadsFolder`](https://docs.cypress.io/guides/references/configuration#Downloads) option to be different than the default, you must set the `CHROMATIC_ARCHIVE_LOCATION` environment variable to the same value. This ensures that the Chromatic can find the archives generated by Cypress tests. |

---

## Viewports

Chromatic will capture the DOM and take snapshots at each viewport size a test is configured to run in.

[Viewports in Cypress](https://docs.cypress.io/api/commands/viewport) can be configured [globally in you main cypress config file](https://docs.cypress.io/api/commands/viewport#Default-sizing) as follows:

```javascript
import { defineConfig } from "cypress";

export default defineConfig({
  viewportWidth: 1000,
  viewportHeight: 660,
});
```

Or using [configuration at the test level](https://docs.cypress.io/api/commands/viewport#Set-viewport-in-the-test-configuration):

```javascript
describe(
  "page display on medium size screen",
  {
    viewportHeight: 1000,
    viewportWidth: 400,
  },
  () => {
    it("does not display sidebar", () => {
      // ...
    });
  },
);
```

<div class="aside">
  Note: Currently, setting the viewport using `cy.viewport()` is not supported.
</div>

---

## You're all set up

Now that you've set up Chromatic, learn the recommended workflow in development and during the pull request

<a class="btn primary round" href="/docs/in-development">
  Learn workflow
</a>
